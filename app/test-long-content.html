<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•¿æ–‡å†…å®¹ä¼˜åŒ–æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .platform-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .platform-btn {
            padding: 8px 20px;
            border: 2px solid #e0e6ed;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .platform-btn.active {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        
        .input-section {
            margin-bottom: 30px;
        }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }
        
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            font-family: inherit;
        }
        
        .char-count {
            text-align: right;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #4CAF50;
            color: white;
        }
        
        .btn-primary:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #2196F3;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }
        
        .btn-test {
            background: #FF9800;
            color: white;
        }
        
        .btn-test:hover {
            background: #F57C00;
            transform: translateY(-2px);
        }
        
        .results {
            margin-top: 30px;
        }
        
        .result-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .version-title {
            font-weight: 600;
            color: #4CAF50;
            font-size: 16px;
        }
        
        .method-badge {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .method-api {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .method-local {
            background: #fff3e0;
            color: #f57c00;
        }
        
        .field-group {
            display: grid;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .field {
            display: flex;
            flex-direction: column;
        }
        
        .field-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 3px;
        }
        
        .field-value {
            font-size: 14px;
            color: #333;
            padding: 8px 12px;
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 4px;
        }
        
        .status {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .status.loading {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .status.error {
            background: #ffebee;
            color: #c62828;
        }
        
        .debug-info {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .sample-texts {
            margin-bottom: 20px;
        }
        
        .sample-btn {
            display: inline-block;
            padding: 5px 12px;
            margin: 5px 5px 5px 0;
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }
        
        .sample-btn:hover {
            background: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ é•¿æ–‡å†…å®¹ä¼˜åŒ–æµ‹è¯•å·¥å…·</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            æµ‹è¯•é•¿æ–‡å†…å®¹æç‚¼ä¼˜åŒ–åŠŸèƒ½ï¼Œæ”¯æŒå°çº¢ä¹¦ã€çŸ­è§†é¢‘ã€å…¬ä¼—å·ä¸‰ä¸ªå¹³å°
        </p>
        
        <div class="platform-selector">
            <button class="platform-btn active" data-platform="xiaohongshu">ğŸ“± å°çº¢ä¹¦</button>
            <button class="platform-btn" data-platform="video">ğŸ¥ çŸ­è§†é¢‘</button>
            <button class="platform-btn" data-platform="wechat">ğŸ“° å…¬ä¼—å·</button>
        </div>
        
        <div class="sample-texts">
            <label>å¿«é€Ÿå¡«å…¥æµ‹è¯•å†…å®¹ï¼š</label>
            <div>
                <button class="sample-btn" data-sample="coffee">å’–å•¡æ•™ç¨‹ (673å­—)</button>
                <button class="sample-btn" data-sample="programming">ç¼–ç¨‹å­¦ä¹  (892å­—)</button>
                <button class="sample-btn" data-sample="travel">æ—…è¡Œæ”»ç•¥ (1156å­—)</button>
                <button class="sample-btn" data-sample="fitness">å¥èº«æŒ‡å— (784å­—)</button>
            </div>
        </div>
        
        <div class="input-section">
            <label for="content">è¾“å…¥é•¿æ–‡å†…å®¹ï¼š</label>
            <textarea id="content" placeholder="åœ¨è¿™é‡Œç²˜è´´æˆ–è¾“å…¥ä½ çš„é•¿æ–‡å†…å®¹..."></textarea>
            <div class="char-count">
                å­—ç¬¦æ•°ï¼š<span id="charCount">0</span>
            </div>
        </div>
        
        <div class="buttons">
            <button class="btn-primary" onclick="testOptimization()">ğŸš€ æµ‹è¯•ä¼˜åŒ–</button>
            <button class="btn-secondary" onclick="testAPI()">ğŸ“¡ æµ‹è¯•API</button>
            <button class="btn-test" onclick="loadTestContent()">ğŸ§ª è‡ªåŠ¨æµ‹è¯•</button>
        </div>
        
        <div id="status"></div>
        <div id="results" class="results"></div>
    </div>

    <script>
        let selectedPlatform = 'xiaohongshu';
        
        // ç¤ºä¾‹é•¿æ–‡å†…å®¹
        const sampleTexts = {
            coffee: `ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªè¶…çº§å®ç”¨çš„ç”Ÿæ´»å°æŠ€å·§ï¼Œå…³äºå¦‚ä½•åœ¨å®¶åˆ¶ä½œå’–å•¡çš„è¯¦ç»†æ•™ç¨‹ã€‚

å¾ˆå¤šæœ‹å‹éƒ½å–œæ¬¢å–å’–å•¡ï¼Œä½†æ˜¯å¤–é¢ä¹°çš„å’–å•¡ä¸ä»…ä»·æ ¼æ˜‚è´µï¼Œè€Œä¸”å£å‘³ä¹Ÿä¸ä¸€å®šç¬¦åˆè‡ªå·±çš„å–œå¥½ã€‚å…¶å®åœ¨å®¶åˆ¶ä½œå’–å•¡éå¸¸ç®€å•ï¼Œåªéœ€è¦æŒæ¡å‡ ä¸ªå…³é”®è¦ç‚¹å°±å¯ä»¥äº†ã€‚

é¦–å…ˆï¼Œé€‰æ‹©åˆé€‚çš„å’–å•¡è±†éå¸¸é‡è¦ã€‚å»ºè®®é€‰æ‹©æ–°é²œçƒ˜ç„™çš„å’–å•¡è±†ï¼Œæœ€å¥½æ˜¯åœ¨çƒ˜ç„™åçš„2-4å‘¨å†…ä½¿ç”¨ã€‚å’–å•¡è±†çš„ç ”ç£¨ç²—ç»†ä¹Ÿä¼šå½±å“å£æ„Ÿï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ‰‹å†²å’–å•¡é€‚åˆä¸­ç»†åº¦ç ”ç£¨ã€‚

å…¶æ¬¡ï¼Œæ°´æ¸©çš„æ§åˆ¶ä¹Ÿæ˜¯å…³é”®å› ç´ ã€‚ç†æƒ³çš„æ°´æ¸©åº”è¯¥åœ¨90-96åº¦ä¹‹é—´ï¼Œè¿‡çƒ­çš„æ°´ä¼šè®©å’–å•¡å˜è‹¦ï¼Œè¿‡å†·çš„æ°´åˆ™æ— æ³•å……åˆ†æå–å’–å•¡çš„é¦™å‘³ã€‚

æ¥ä¸‹æ¥æ˜¯å†²æ³¡æ—¶é—´çš„æŒæ¡ã€‚ä¸åŒçš„å†²æ³¡æ–¹æ³•éœ€è¦ä¸åŒçš„æ—¶é—´ï¼Œæ‰‹å†²å’–å•¡ä¸€èˆ¬éœ€è¦2-4åˆ†é’Ÿï¼Œè€Œæ³•å‹å£¶åˆ™éœ€è¦4åˆ†é’Ÿå·¦å³ã€‚

æœ€åï¼Œå’–å•¡å’Œæ°´çš„æ¯”ä¾‹ä¹Ÿå¾ˆé‡è¦ï¼Œä¸€èˆ¬æ¨è1:15åˆ°1:17çš„æ¯”ä¾‹ï¼Œä¹Ÿå°±æ˜¯1å…‹å’–å•¡ç²‰å¯¹åº”15-17æ¯«å‡æ°´ã€‚

æŒæ¡äº†è¿™äº›æŠ€å·§ï¼Œä½ å°±å¯ä»¥åœ¨å®¶åˆ¶ä½œå‡ºåª²ç¾å’–å•¡åº—çš„ç¾å‘³å’–å•¡äº†ã€‚ä¸ä»…çœé’±ï¼Œè¿˜èƒ½æ ¹æ®è‡ªå·±çš„å–œå¥½è°ƒæ•´å£å‘³ã€‚`,

            programming: `é›¶åŸºç¡€å­¦ç¼–ç¨‹ï¼30å¤©ä»å°ç™½åˆ°å¤§ç¥çš„é€†è¢­ä¹‹è·¯

å¾ˆå¤šäººè§‰å¾—ç¼–ç¨‹å¾ˆéš¾ï¼Œä½†å…¶å®åªè¦æ–¹æ³•å¯¹äº†ï¼Œ30å¤©å°±èƒ½æŒæ¡åŸºç¡€ã€‚æˆ‘è‡ªå·±å°±æ˜¯ä»å®Œå…¨ä¸æ‡‚ä»£ç åˆ°ç°åœ¨èƒ½ç‹¬ç«‹å¼€å‘é¡¹ç›®ï¼Œæ•´ä¸ªè¿‡ç¨‹ç”¨äº†ä¸åˆ°ä¸€ä¸ªæœˆã€‚

ç¬¬ä¸€å‘¨ï¼šåŸºç¡€è¯­æ³•å­¦ä¹ 
é€‰æ‹©Pythonä½œä¸ºå…¥é—¨è¯­è¨€ï¼Œå› ä¸ºå®ƒè¯­æ³•ç®€å•ï¼Œå®¹æ˜“ç†è§£ã€‚æ¯å¤©èŠ±2-3å°æ—¶å­¦ä¹ å˜é‡ã€å¾ªç¯ã€å‡½æ•°ç­‰åŸºæœ¬æ¦‚å¿µã€‚æ¨èä½¿ç”¨åœ¨çº¿ç¼–ç¨‹å¹³å°ç»ƒä¹ ï¼Œæ¯”å¦‚LeetCodeæˆ–è€…å»–é›ªå³°çš„æ•™ç¨‹ã€‚

ç¬¬äºŒå‘¨ï¼šé¡¹ç›®å®è·µ
å¼€å§‹åšä¸€äº›å°é¡¹ç›®ï¼Œæ¯”å¦‚è®¡ç®—å™¨ã€çŒœæ•°å­—æ¸¸æˆç­‰ã€‚è¿™ä¸ªé˜¶æ®µæœ€é‡è¦çš„æ˜¯åŠ¨æ‰‹å†™ä»£ç ï¼Œä¸è¦åªçœ‹ä¸ç»ƒã€‚é‡åˆ°é—®é¢˜å°±Googleæœç´¢ï¼Œå­¦ä¼šçœ‹å®˜æ–¹æ–‡æ¡£ã€‚

ç¬¬ä¸‰å‘¨ï¼šè¿›é˜¶å­¦ä¹ 
å­¦ä¹ é¢å‘å¯¹è±¡ç¼–ç¨‹ã€æ–‡ä»¶æ“ä½œã€ç½‘ç»œç¼–ç¨‹ç­‰è¿›é˜¶å†…å®¹ã€‚å¯ä»¥å°è¯•åšä¸€ä¸ªç®€å•çš„çˆ¬è™«æˆ–è€…ç½‘ç«™ã€‚è¿™æ—¶å€™è¦å¼€å§‹å…³æ³¨ä»£ç çš„è§„èŒƒæ€§å’Œå¯è¯»æ€§ã€‚

ç¬¬å››å‘¨ï¼šé¡¹ç›®å®Œå–„
é€‰æ‹©ä¸€ä¸ªç¨å¾®å¤æ‚çš„é¡¹ç›®ï¼Œæ¯”å¦‚ä¸ªäººåšå®¢ç³»ç»Ÿæˆ–è€…æ•°æ®åˆ†æå·¥å…·ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šé‡åˆ°å¾ˆå¤šå®é™…é—®é¢˜ï¼Œæ­£å¥½é”»ç‚¼è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚

å…³é”®æ˜¯è¦åšæŒæ¯å¤©ç»ƒä¹ ï¼Œä¸è¦ä¸‰å¤©æ‰“é±¼ä¸¤å¤©æ™’ç½‘ã€‚ç¼–ç¨‹æ˜¯ä¸€ä¸ªéœ€è¦å¤§é‡ç»ƒä¹ çš„æŠ€èƒ½ï¼Œåªæœ‰é€šè¿‡ä¸æ–­çš„ç¼–ç æ‰èƒ½çœŸæ­£æŒæ¡ã€‚`,

            travel: `æ—¥æœ¬å…³è¥¿5æ—¥æ¸¸å®Œå…¨æ”»ç•¥ï¼šå¤§é˜ªäº¬éƒ½å¥ˆè‰¯æ·±åº¦ä½“éªŒï¼Œäººå‡3000å…ƒç©è½¬å¤éƒ½

ä½œä¸ºä¸€ä¸ªå»è¿‡æ—¥æœ¬åå‡ æ¬¡çš„æ—…è¡Œåšä¸»ï¼Œè¿™æ¬¡ç»™å¤§å®¶åˆ†äº«å…³è¥¿åœ°åŒºçš„æ·±åº¦æ¸¸æ”»ç•¥ã€‚å…³è¥¿åŒ…æ‹¬å¤§é˜ªã€äº¬éƒ½ã€å¥ˆè‰¯ç­‰åŸå¸‚ï¼Œæ˜¯ä½“éªŒæ—¥æœ¬ä¼ ç»Ÿæ–‡åŒ–çš„æœ€ä½³åœ°åŒºã€‚

ç¬¬ä¸€å¤©ï¼šå¤§é˜ªåˆä½“éªŒ
ä»å…³è¥¿å›½é™…æœºåœºåˆ°å¤§é˜ªå¸‚åŒºï¼Œæ¨èä¹°å…³è¥¿æœºåœºå¿«çº¿ç¥¨ã€‚ç¬¬ä¸€ç«™å»ºè®®å»å¤§é˜ªåŸï¼Œäº†è§£æ—¥æœ¬å†å²æ–‡åŒ–ã€‚ä¸‹åˆå¯ä»¥å»é“é¡¿å €ï¼Œä½“éªŒå¤§é˜ªçš„ç¾é£Ÿæ–‡åŒ–ï¼Œç« é±¼çƒ§ã€å¤§é˜ªçƒ§éƒ½æ˜¯å¿…å°ç¾é£Ÿã€‚

ç¬¬äºŒå¤©ï¼šäº¬éƒ½å¤éŸµ
æ—©ä¸Šä¹˜åé˜ªæ€¥ç”µè½¦åˆ°äº¬éƒ½ï¼Œå…ˆå»æ¸…æ°´å¯ºæ„Ÿå—å¤å»ºç­‘çš„é­…åŠ›ã€‚ä¸‹åˆèµ°è®¿äºŒå¹´å‚ã€ä¸‰å¹´å‚çš„ä¼ ç»Ÿè¡—é“ï¼Œå¯ä»¥ç§Ÿä¸€å¥—å’Œæœæ‹ç…§ç•™å¿µã€‚å‚æ™šå»ç¥—å›­çœ‹è‰ºå¦“è¡¨æ¼”ã€‚

ç¬¬ä¸‰å¤©ï¼šå¥ˆè‰¯èŒé¹¿
ä¸€æ—¥æ¸¸å¥ˆè‰¯ï¼Œé‡ç‚¹æ˜¯å¥ˆè‰¯å…¬å›­çš„å°é¹¿å’Œä¸œå¤§å¯ºçš„å¤§ä½›ã€‚å°é¹¿å¾ˆæ¸©é¡ºï¼Œå¯ä»¥ä¹°é¹¿é¥¼å¹²å–‚é£Ÿã€‚æ˜¥æ—¥å¤§ç¤¾çš„åƒé¸Ÿå±…ä¹Ÿæ˜¯å¿…æ‰“å¡æ™¯ç‚¹ã€‚

ç¬¬å››å¤©ï¼šäº¬éƒ½æ·±åº¦æ¸¸
ä¸Šåˆå»é‡‘é˜å¯ºï¼Œè¿™æ˜¯äº¬éƒ½æœ€è‘—åçš„æ™¯ç‚¹ä¹‹ä¸€ã€‚ä¸‹åˆå¯ä»¥é€‰æ‹©å²©å±±ç«¹æ—æˆ–è€…ä¼è§ç¨»è·å¤§ç¤¾ã€‚å²©å±±ç«¹æ—é€‚åˆæ‹ç…§ï¼Œä¼è§ç¨»è·é€‚åˆçˆ¬å±±é”»ç‚¼ã€‚

ç¬¬äº”å¤©ï¼šå¤§é˜ªè´­ç‰©
æœ€åä¸€å¤©ä¸»è¦æ˜¯è´­ç‰©å’Œå“å°ç¾é£Ÿã€‚å¿ƒæ–‹æ¡¥æ˜¯è´­ç‰©å¤©å ‚ï¼Œä»å¥¢ä¾ˆå“åˆ°å¹³ä»·å•†å“éƒ½æœ‰ã€‚é»‘é—¨å¸‚åœºå¯ä»¥å“å°å„ç§æ–°é²œæµ·é²œã€‚

é¢„ç®—åˆ†æï¼š
æœºç¥¨å¾€è¿”ï¼š1200å…ƒ
ä½å®¿äº”æ™šï¼š800å…ƒï¼ˆé’æ—…æˆ–å•†åŠ¡é…’åº—ï¼‰
äº¤é€šè´¹ï¼š400å…ƒï¼ˆåŒ…æ‹¬JR PASSï¼‰
é¤é¥®ï¼š500å…ƒ
é—¨ç¥¨ï¼š100å…ƒ
æ€»è®¡çº¦3000å…ƒï¼Œæ˜¯æ€§ä»·æ¯”å¾ˆé«˜çš„æ—…è¡Œæ–¹æ¡ˆã€‚

å°è´´å£«ï¼šæå‰ä¸‹è½½è°·æ­Œç¿»è¯‘å’Œæ¢ä¹˜æ¡ˆå†…APPï¼Œæ—¥è¯­ä¸å¥½ä¹Ÿèƒ½è½»æ¾å‡ºè¡Œã€‚è®°å¾—å¸¦ç°é‡‘ï¼Œå¾ˆå¤šåœ°æ–¹ä¸æ”¯æŒåˆ·å¡ã€‚`,

            fitness: `å¥èº«å°ç™½å¿…çœ‹ï¼90å¤©ä»è™šå¼±åˆ°å¥å£®çš„å®Œæ•´è®­ç»ƒè®¡åˆ’

å¾ˆå¤šäººæƒ³å¼€å§‹å¥èº«ï¼Œä½†ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ã€‚æˆ‘ä½œä¸ºä¸€ä¸ªä»120æ–¤ç˜¦çŒ´åˆ°ç°åœ¨160æ–¤è‚Œè‚‰ç”·çš„è¿‡æ¥äººï¼Œåˆ†äº«ä¸€å¥—å®Œæ•´çš„90å¤©è®­ç»ƒè®¡åˆ’ã€‚

å‰30å¤©ï¼šåŸºç¡€é€‚åº”æœŸ
è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯è®©èº«ä½“é€‚åº”è¿åŠ¨å¼ºåº¦ã€‚æ¯å‘¨3æ¬¡å…¨èº«æ€§è®­ç»ƒï¼Œæ¯æ¬¡45åˆ†é’Ÿã€‚é‡ç‚¹ç»ƒä¹ æ·±è¹²ã€ä¿¯å§æ’‘ã€å¼•ä½“å‘ä¸Šç­‰å¤åˆåŠ¨ä½œã€‚ä¸è¦æ€¥äºå¢åŠ é‡é‡ï¼Œå…ˆæŠŠåŠ¨ä½œåšæ ‡å‡†ã€‚

é¥®é£Ÿæ–¹é¢ï¼Œå¢åŠ è›‹ç™½è´¨æ‘„å…¥ï¼Œæ¯å…¬æ–¤ä½“é‡æ‘„å…¥1.2-1.5å…‹è›‹ç™½è´¨ã€‚å¤šåƒé¸¡èƒ¸è‚‰ã€é¸¡è›‹ã€ç‰›å¥¶ç­‰é«˜è›‹ç™½é£Ÿç‰©ã€‚

ç¬¬31-60å¤©ï¼šåŠ›é‡æå‡æœŸ
å¼€å§‹æŒ‰éƒ¨ä½åˆ†åŒ–è®­ç»ƒã€‚å‘¨ä¸€ç»ƒèƒ¸å’Œä¸‰å¤´è‚Œï¼Œå‘¨äºŒç»ƒèƒŒå’ŒäºŒå¤´è‚Œï¼Œå‘¨ä¸‰ç»ƒè…¿ï¼Œå‘¨å››ç»ƒè‚©ï¼Œå‘¨äº”ç»ƒæ‰‹è‡‚ã€‚æ¯ä¸ªéƒ¨ä½æ¯å‘¨ç»ƒä¹ 2æ¬¡ã€‚

è¿™ä¸ªé˜¶æ®µè¦é€æ¸å¢åŠ è®­ç»ƒé‡é‡ï¼Œéµå¾ªæ¸è¿›å¼è¶…è´Ÿè·åŸåˆ™ã€‚é‡é‡é€‰æ‹©ä»¥èƒ½å®Œæˆ8-12æ¬¡ä¸ºå®œï¼Œæœ€åå‡ æ¬¡è¦æœ‰æ˜æ˜¾çš„åŠ›ç«­æ„Ÿã€‚

ç¬¬61-90å¤©ï¼šå¡‘å½¢å¼ºåŒ–æœŸ
è¿™ä¸ªé˜¶æ®µèº«ä½“å·²ç»æœ‰äº†æ˜æ˜¾å˜åŒ–ï¼Œè¦å¼€å§‹æ³¨é‡è‚Œè‚‰çš„ç»†èŠ‚é›•åˆ»ã€‚å¢åŠ ä¸€äº›å­¤ç«‹æ€§åŠ¨ä½œï¼Œæ¯”å¦‚å“‘é“ƒé£é¸Ÿã€é›†ä¸­å¼¯ä¸¾ç­‰ã€‚

æœ‰æ°§è¿åŠ¨ä¹Ÿè¦è·Ÿä¸Šï¼Œæ¯å‘¨3æ¬¡ï¼Œæ¯æ¬¡30åˆ†é’Ÿã€‚å¯ä»¥é€‰æ‹©è·‘æ­¥ã€æ¸¸æ³³ã€éª‘è¡Œç­‰ã€‚æœ‰æ°§èƒ½å¸®åŠ©é™ä½ä½“è„‚ç‡ï¼Œè®©è‚Œè‚‰çº¿æ¡æ›´æ˜æ˜¾ã€‚

è¥å…»è¡¥å……ï¼šé™¤äº†æ­£å¸¸é¥®é£Ÿï¼Œå¯ä»¥é€‚å½“è¡¥å……ä¹³æ¸…è›‹ç™½ç²‰å’Œè‚Œé…¸ã€‚ä¹³æ¸…è›‹ç™½åœ¨è®­ç»ƒå30åˆ†é’Ÿå†…æ‘„å…¥æ•ˆæœæœ€å¥½ã€‚

æ³¨æ„äº‹é¡¹ï¼šå……è¶³çš„ç¡çœ å¾ˆé‡è¦ï¼Œè‚Œè‚‰æ˜¯åœ¨ä¼‘æ¯æ—¶ç”Ÿé•¿çš„ã€‚æ¯æ™šä¿è¯7-8å°æ—¶ç¡çœ ã€‚å¦‚æœæ„Ÿåˆ°ç–²åŠ³ï¼Œä¸è¦ç¡¬æ’‘ï¼Œé€‚å½“ä¼‘æ¯ä¸€å¤©ã€‚

åšæŒè¿™ä¸ªè®¡åˆ’90å¤©ï¼Œä½ ä¼šå‘ç°è‡ªå·±çš„èº«ææœ‰ç¿»å¤©è¦†åœ°çš„å˜åŒ–ã€‚è®°ä½ï¼Œå¥èº«æ˜¯ä¸€ä¸ªé•¿æœŸè¿‡ç¨‹ï¼Œä¸è¦æœŸæœ›ä¸€å¤œå°±æœ‰æ˜æ˜¾æ•ˆæœã€‚`
        };
        
        // å¹³å°é€‰æ‹©
        document.querySelectorAll('.platform-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.platform-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                selectedPlatform = this.dataset.platform;
            });
        });
        
        // ç¤ºä¾‹æ–‡æœ¬å¡«å…¥
        document.querySelectorAll('.sample-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const sampleKey = this.dataset.sample;
                document.getElementById('content').value = sampleTexts[sampleKey];
                updateCharCount();
            });
        });
        
        // å­—ç¬¦è®¡æ•°
        function updateCharCount() {
            const content = document.getElementById('content').value;
            document.getElementById('charCount').textContent = content.length;
        }
        
        document.getElementById('content').addEventListener('input', updateCharCount);
        
        // æ˜¾ç¤ºçŠ¶æ€
        function showStatus(message, type = 'loading') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResults(result) {
            const resultsDiv = document.getElementById('results');
            
            if (!result || !result.versions) {
                resultsDiv.innerHTML = '<div class="status error">âŒ ä¼˜åŒ–å¤±è´¥æˆ–æ— ç»“æœ</div>';
                return;
            }
            
            let html = `<h3>ä¼˜åŒ–ç»“æœ (${result.versions.length} ä¸ªç‰ˆæœ¬)</h3>`;
            
            result.versions.forEach((version, index) => {
                html += `
                    <div class="result-card">
                        <div class="result-header">
                            <div class="version-title">ç‰ˆæœ¬ ${index + 1}</div>
                            <div class="method-badge ${result.method === 'local' ? 'method-local' : 'method-api'}">
                                ${result.method === 'local' ? 'ğŸ”§ æœ¬åœ°å¤„ç†' : 'ğŸŒ APIå¤„ç†'}
                                ${result.fallback ? ' (é™çº§)' : ''}
                            </div>
                        </div>
                        <div class="field-group">
                            ${Object.entries(version).map(([key, value]) => `
                                <div class="field">
                                    <div class="field-label">${key}</div>
                                    <div class="field-value">${value}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            if (result.debug) {
                html += `
                    <div class="debug-info">
                        <strong>è°ƒè¯•ä¿¡æ¯:</strong><br>
                        ${Object.entries(result.debug).map(([key, value]) => 
                            `${key}: ${value}`
                        ).join('<br>')}
                    </div>
                `;
            }
            
            resultsDiv.innerHTML = html;
        }
        
        // æµ‹è¯•ä¼˜åŒ–åŠŸèƒ½
        async function testOptimization() {
            const content = document.getElementById('content').value.trim();
            
            if (!content) {
                showStatus('âŒ è¯·è¾“å…¥å†…å®¹', 'error');
                return;
            }
            
            if (content.length < 50) {
                showStatus('âš ï¸ å†…å®¹å¤ªçŸ­ï¼Œå»ºè®®è‡³å°‘è¾“å…¥50å­—ç¬¦', 'error');
                return;
            }
            
            showStatus('ğŸš€ æ­£åœ¨ä½¿ç”¨ä¿®å¤ç‰ˆæœ¬è¿›è¡Œå†…å®¹ä¼˜åŒ–...', 'loading');
            
            try {
                // åŠ è½½ä¿®å¤è„šæœ¬
                if (!window.fixLongContentOptimization) {
                    const script = document.createElement('script');
                    script.src = '/long-content-fix.js';
                    document.head.appendChild(script);
                    
                    await new Promise(resolve => {
                        script.onload = resolve;
                        setTimeout(resolve, 2000); // è¶…æ—¶ä¿æŠ¤
                    });
                }
                
                if (window.fixLongContentOptimization) {
                    const result = await window.fixLongContentOptimization(content, selectedPlatform);
                    
                    if (result && result.success) {
                        showStatus('âœ… ä¼˜åŒ–æˆåŠŸï¼', 'success');
                        showResults(result);
                    } else {
                        showStatus('âŒ ä¼˜åŒ–å¤±è´¥', 'error');
                    }
                } else {
                    throw new Error('ä¿®å¤è„šæœ¬åŠ è½½å¤±è´¥');
                }
                
            } catch (error) {
                console.error('æµ‹è¯•å¤±è´¥:', error);
                showStatus(`âŒ æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        // æµ‹è¯•APIæ¥å£
        async function testAPI() {
            const content = document.getElementById('content').value.trim();
            
            if (!content) {
                showStatus('âŒ è¯·è¾“å…¥å†…å®¹', 'error');
                return;
            }
            
            showStatus('ğŸ“¡ æ­£åœ¨æµ‹è¯•APIæ¥å£...', 'loading');
            
            try {
                const response = await fetch('/api/optimize-content', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        content: content,
                        platform: selectedPlatform
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showStatus('âœ… APIæµ‹è¯•æˆåŠŸï¼', 'success');
                    showResults(result);
                } else {
                    showStatus(`âŒ APIæµ‹è¯•å¤±è´¥: ${result.error}`, 'error');
                }
                
            } catch (error) {
                console.error('APIæµ‹è¯•å¤±è´¥:', error);
                showStatus(`âŒ APIæµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        // è‡ªåŠ¨æµ‹è¯•
        async function loadTestContent() {
            // éšæœºé€‰æ‹©ä¸€ä¸ªç¤ºä¾‹
            const samples = Object.keys(sampleTexts);
            const randomSample = samples[Math.floor(Math.random() * samples.length)];
            
            document.getElementById('content').value = sampleTexts[randomSample];
            updateCharCount();
            
            showStatus('ğŸ§ª å·²åŠ è½½æµ‹è¯•å†…å®¹ï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...', 'loading');
            
            setTimeout(testOptimization, 1000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateCharCount();
            showStatus('âœ… æµ‹è¯•å·¥å…·å·²å°±ç»ªï¼Œè¯·è¾“å…¥å†…å®¹å¼€å§‹æµ‹è¯•', 'success');
        });
    </script>
</body>
</html> 